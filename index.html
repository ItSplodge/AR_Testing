<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-xr@1.0.0/dist/aframe-xr.js"></script>
  </head>
  <body>
    <a-scene
      embedded
      xrweb="AR, hit-test"
      vr-mode-ui="enabled: false"
      arjs="sourceType: webcam;"
      renderer="colorManagement: true, physicallyCorrectLights"
      device-orientation-permission-ui="enabled: true">

      <!-- Place the model onto detected surfaces -->
      <a-entity id="box" gltf-model="url(https://itsplodge.github.io/AR_Testing/LBP%20V15.glb)"
                position="0 0 0"
                scale="0.2 0.2 0.2"
                visible="false">
      </a-entity>

    </a-scene>

    <script>
      // Handle the hit-test logic to place the model on detected surfaces
      AFRAME.registerComponent('hit-test', {
        init: function () {
          const box = document.getElementById('box');

          this.el.sceneEl.addEventListener('enter-vr', () => {
            navigator.xr.requestSession('immersive-ar', {
              requiredFeatures: ['hit-test'],
              optionalFeatures: ['dom-overlay'],
              domOverlay: { root: document.body }
            }).then((session) => {
              session.requestReferenceSpace('viewer').then((refSpace) => {
                // Handle hit test and place the box
                // More detailed hit-test handling code would be here
                box.setAttribute('visible', true);
              });
            });
          });
        }
      });
    </script>
  </body>
</html>
